/**
 * Created by alicamargo on 31/05/15.
 */
!function(r){var e=function(r){var e=r.winner?"winner":"",t=r.ID?r.ID:"",a=r.url?r.url:"javascript:;",i='       <div class="player '+e+" player-"+t+'" data-id="'+t+'">';return i+='        <a class="name" href="'+a+'">',i+="           "+r.name,i+="        </a>",i+="       </div>"},t=function(r){var t='   <div class="match">';return r.player1&&(t+=e(r.player1)),r.player2&&(t+=e(r.player2)),t+="   </div>"},a=function(r,e){for(var t='<div class="separator-brackets rd-'+r+'">',a=1;e>=a;a++)t+='<div class="line"></div>';return t+="</div>"},o=function(e,t){var a="";if(a+='<div class="brackets-header">',e)if(Array.isArray(e))r.each(e,function(r,e){a+='<div class="title">'+e+"</div>"});else for(i=1;i<=t;i++)a+=i==t?'<div class="title">Champion</div>':i==t-1&&t>2?'<div class="title">Final</div>':i==t-2&&t>3?'<div class="title">Semifinal</div>':'<div class="title">Round '+i+"</div>";return a+="</div>"},n=function(e,i){var n="";return n+=o(i,e.length),n+='<div class="container-brackets">',r.each(e,function(i,o){n+='<div class="round rd-'+(i+1)+'">',r.each(o,function(r,e){n+=t(e)}),n+="</div>",e.length!=i+1&&(n+=a(i+1,o.length))}),n+="</div>"},c=function(r){var e="";for(r=r?r:0,i=2;i<=r;i++){var t=23*Math.pow(2,i-2)+20*Math.pow(2,i-3)+40*(Math.pow(2,i-3)-1),a=2==i?32.5:t+19.5,o=2==i?21.5:t+8.5,n=2*o+40,c=2*a+40;e+="/*-- Round "+i+" --*/",e+=".container-brackets .round.rd-"+i+"{ margin-top: "+o+"px; }",e+="   .container-brackets .round.rd-"+i+" .match .player{ margin-bottom: "+n+"px; }",e+="/*-- lines "+i+" --*/",e+=".container-brackets .separator-brackets.rd-"+i+" .line{",e+="   height: "+c+"px;",e+="   margin-bottom: "+c+"px;",e+="}",e+="   .container-brackets .separator-brackets.rd-"+i+" .line:first-child{ margin-top: "+a+"px; }"}return e},l=function(r){return 150*r+80*(r-1)-75*(r-1)},s=function(r,e){var t,a=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");t=".left{float: left}",t+=".right{float: right}",t+=".brackets-header{",t+="    margin-bottom: 20px;",t+="    height: 30px;",t+="    width: "+l(e)+"px !important;",t+="}",t+=".brackets-header .title{",t+="    color: "+r.color_title+" !important;",t+="}",t+=".brackets-header .title{ float: left; width: 150px;  margin-right: 5px; text-align: center;}",t+=".brackets-header .title:last-child{ margin-right: 0px;}",t+=".container-brackets{",t+="    position: relative;",t+="    width: "+l(e)+"px !important;",t+="}",t+=".container-brackets .round{ width: 150px; margin-left: -75px; float: left;}",t+="    .container-brackets .round:first-child{ margin-left: 0; }",t+="    .container-brackets .round .match{}",t+="        .container-brackets .round .match:last-child{ margin-bottom: 0px;}",t+="        .container-brackets .round .match .player{",t+="            border: solid 1px "+r.border_color+";",t+="            border-radius: "+r.border_radius_player+";",t+="            height: 21px;",t+="            padding: 0 5px;",t+="            /*width: calc(100% - 10px);*/",t+="            line-height: 21px;",t+="            background: "+r.bg_player+";",t+="        }",t+="            .container-brackets .round .match .player.hover{ background: "+r.bg_player_hover+"; color: "+r.color_player_hover+";}",t+="                .container-brackets .round .match .player .name{",t+="                    text-align: center;",t+="                    text-decoration: none;",t+="                    cursor: pointer;",t+="                   width: 100%;",t+="                    margin-left: 10px;",t+="                    /*display: block;*/",t+="                    color: "+r.color_player+";",t+="                }",t+="                .container-brackets .round .match .player.hover a{",t+="                    color: "+r.color_player_hover+" !important;",t+="                }",t+=".container-brackets .separator-brackets{ width: 80px; float: left;}",t+="    .container-brackets .separator-brackets .line{",t+="        border: 1px solid "+r.border_color+";",t+="        border-left: none;",t+="        border-radius: 0 "+r.border_radius_lines+" "+r.border_radius_lines+" 0;",t+="    }",t+="        .container-brackets .separator-brackets .line:last-child{ margin-bottom: 0; }",t+="/*-- First ronda --*/",t+="    .container-brackets .round.rd-1 .match{ margin-bottom: 40px; }",t+="        .container-brackets .round.rd-1 .match .player{ margin-bottom: 20px; }",t+="/*-- First lines --*/",t+=".container-brackets .separator-brackets.rd-1 .line{",t+="    height: 42px;",t+="    margin-bottom: 62px;",t+="}",t+="    .container-brackets .separator-brackets.rd-1 .line:first-child{ margin-top: 11px; }",t+=c(e),i.type="text/css",i.styleSheet?i.styleSheet.cssText=t:i.appendChild(document.createTextNode(t)),a.appendChild(i)};r.fn.brackets=function(e){var t=r.extend({},r.fn.brackets.defaults,e);return t.rounds?void(this.length>=1?this.each(function(){var e=r(this),a=n(t.rounds,t.titles);e.html(a),s(t,t.rounds.length),r(".player",e).on({mouseover:function(){var e=r(this);ID=e.data("id"),r(".player[data-id='"+ID+"']").addClass("hover")},mouseout:function(){r(".player").removeClass("hover")}})}):console.error("Object not found :( ")):(console.error("Round not found :("),!1)},r.fn.brackets.defaults={rounds:!1,titles:!1,color_title:"black",border_color:"black",color_player:"black",bg_player:"white",color_player_hover:"black",bg_player_hover:"white",border_radius_player:"0px",border_radius_lines:"0px"}}(jQuery);